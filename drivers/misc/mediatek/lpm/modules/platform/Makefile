MTK_LPM_MODULES_FOLDER=$(srctree)/drivers/misc/mediatek/lpm/modules/

ccflags-y += -I$(MTK_LPM_MODULES_FOLDER)/include/

#Get platform name
MTK_LPM_MODULE_PLATFORM_PLAT_NAME = $(strip $(subst ",, $(CONFIG_MTK_LPM_MODULE_NAME)))

#mtk-lpm platform source files
ifneq ($(MTK_LPM_MODULE_PLATFORM_PLAT_NAME), )
include $(MTK_LPM_MODULES_FOLDER)/platform/${MTK_LPM_MODULE_PLATFORM_PLAT_NAME}/build.mk

ccflags-y += -I$(MTK_LPM_MODULES_FOLDER)/platform/${MTK_LPM_MODULE_PLATFORM_PLAT_NAME}/
ccflags-y += ${MTK_LPM_MODULE_PLAT_PLATFORM_CFLAGS}
MTK_LPM_MODULE_PLAT_PLATFORM = $(MTK_LPM_MODULE_PLAT_PLATFORM_OBJS:%.o=${MTK_LPM_MODULE_PLATFORM_PLAT_NAME}/%.o)


#Generic build
BUILD_MTK_LPM_PLAT_MODUDLE_NAME=mtk-lpm-plat-${MTK_LPM_MODULE_PLATFORM_PLAT_NAME}
obj-$(CONFIG_MTK_LOW_POWER_MODULE) += ${BUILD_MTK_LPM_PLAT_MODUDLE_NAME}.o
${BUILD_MTK_LPM_PLAT_MODUDLE_NAME}-objs += $(MTK_LPM_MODULE_PLAT_PLATFORM)
endif
